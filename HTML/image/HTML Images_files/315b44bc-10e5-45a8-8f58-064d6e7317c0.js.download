(()=>{let e;let o="PubxFloorProvider";(ee=z||(z={})).WIN="WIN",ee.FLOORED="FLOORED",ee.NOBIDS="NOBIDS";let t=()=>(()=>({splitRate:50,samplingRate:10,enableInstrumentationLogs:false,pbNsKeys:"pbjs",pbNamespace:null,currency:"EUR",modelVersion:"cb_AB_z_dt_0.75_dwt_1.0_dnt_0.1",auctionDelay:100,pubxId:"315b44bc-10e5-45a8-8f58-064d6e7317c0",schema:['bidder','gptSlot','mediaType'],defaultValues:{'*|*|*|banner':0.0614,'*|*|/22152718,16833175/sws-hb//w3schools.com//mid_content|banner':0.0521,'*|*|/22152718,16833175/sws-hb//w3schools.com//sidebar_sticky|banner':0.0513,'*|*|/22152718,16833175/sws-hb//w3schools.com//wide_skyscraper|banner':0.0521,'*|*|/22152718,16833175/sws-hb//w3schools.com//main_leaderboard|banner':0.0542,'*|*|/22152718,16833175/sws-hb//w3schools.com//try_it_leaderboard|banner':0.05,'*|*|/22152718,16833175/sws-hb//w3schools.com//bottom_medium_rectangle|banner':0.0516,'kargo|*|banner':4,'ogury|*|banner':4,'gumgum|*|banner':4},floorFetchUrl:"https://floor.pbxai.com/?pubxId=315b44bc-10e5-45a8-8f58-064d6e7317c0&page="+window.location.href,floorMin:null,floorEnforcement:{"floorDeals":true},hbPbKey:"hb_pb",pubxSplitKey:"pubx-a",pubxSplitOnValue:"on",pubxSplitOffValue:"off",pubxOptimizedKey:"pubx-op",pubxOptimizedOnValue:"on",pubxOptimizedOffValue:"off",pubxABSplitAKey:"pubx-exp-A",pubxABSplitBKey:"pubx-exp-B",pubxMvKey:"pubx-m_v",pubxFloorKey:"pubx-floor",pubxFloorMvKey:"pubx-floor-mv",pubxExperiments:{}}))(),r=(e,o)=>{window[o]=window[o]||{},window[o].que=window[o].que||[],window[o].name=o,e.pbNamespace=window[o]},i=e=>({provider:"pubxai",options:{samplingRate:e.samplingRate,pubxId:e.pubxId}}),a=e=>{e.pbNamespace.que.push(function(){let{debug:o,error:t,remotePageError:r}=window.__pubx__.logger;if(!e.pbNamespace.installedModules.includes("pubxaiAnalyticsAdapter")){r({code:Z.PUBX_AA_NOT_FOUND});return}{let t=i(e);e.pbNamespace.enableAnalytics(t),o("Enabling Analytics",t)}})},n=e=>({floorProvider:o,modelVersion:e.modelVersion,currency:e.currency,schema:{fields:e.schema},values:e.defaultValues}),d=e=>{var o;let t={floors:{auctionDelay:e.auctionDelay,endpoint:{url:e.floorFetchUrl},data:n(e)}};return e.floorMin&&(t.floors.floorMin=e.floorMin),e.floorEnforcement&&(t.floors.enforcement=e.floorEnforcement),F(e.pubxExperiments)&&(null===(o=window.__pubx__.abTestConfig)||void 0===o?void 0:o.isABTestEnabled)&&(t=T(t)),t},l=(e,t)=>{window.__pubxLoaded__&&e.pbNamespace.que.push(function(){let{debug:r,error:i,remotePageError:a}=window.__pubx__.logger;if(!e.pbNamespace.installedModules.includes("priceFloors")){a({code:Z.PRICE_FLOORS_NOT_FOUND});return}let n=e.pbNamespace.getConfig("floors");n&&n.data&&n.data.floorProvider&&n.data.floorProvider!==o&&a({code:Z.NON_PUBX_FLOORS_FOUND,payload:{existingFloors:n}});let d=t(e);window.__pubxFloorsConfig__=d,e.pbNamespace.setConfig(d),r("Setting Floors Config",d)})},_=(e,o)=>{let t=void 0!==e.adserverTargeting&&void 0!==e.adserverTargeting[o]&&!isNaN(e.adserverTargeting[o])&&parseFloat(e.adserverTargeting[o])>0;return t},s=(e,o)=>e.filter(e=>e.adUnitCode===o),u=(e,o)=>e.filter(e=>e.adUnitCode===o),c=(e,o)=>e.flatMap(e=>e.bids).filter(e=>e.adUnitCode===o),p=(e,o,t)=>0===e.length&&0===o.length?z.NOBIDS:e.some(e=>_(e,t))?z.WIN:z.FLOORED,f=(e,o,t,r,i,a)=>void 0===e||"string"!=typeof o||"string"!=typeof t?(a({code:Z.CURRENCY_INVALID_INPUT,adUnitCode:i,payload:{value:e,fromCurrency:o,toCurrency:t}}),Number(e)):o===t?Number(e):void 0===r.pbNamespace.convertCurrency?(a({code:Z.CURRENCY_MODULE_NOT_INSTALLED,adUnitCode:i,payload:{value:e,fromCurrency:o,toCurrency:t}}),Number(e)):r.pbNamespace.convertCurrency(e,o,t),g=(e,o)=>[...e,...o],b=e=>{if(void 0!==e)return{floorValue:e.floorValue,floorRule:e.floorRule,floorCurrency:e.floorCurrency}},O=(e,o,t,r,i,a,n)=>{var d;let{remoteAucError:l,remoteAucEvent:s}=n,{hbPbKey:u}=a,c,p,O,m,N={};switch(i){case z.WIN:let R=o.filter(e=>_(e,u)).sort((e,o)=>parseFloat(o.adserverTargeting[u])-parseFloat(e.adserverTargeting[u]))[0];c=parseFloat(R.adserverTargeting[u]),O=R.currency,m=R.floorData,N=R.adserverTargeting;break;case z.FLOORED:let w=g(t,o),v=w.sort((o,t)=>f(t.originalCpm,t.originalCurrency,a.currency,a,e.code,l)-f(o.originalCpm,o.originalCurrency,a.currency,a,e.code,l))[0];c=v.originalCpm,O=v.originalCurrency,m=v.floorData,N=v.adserverTargeting||{};break;case z.NOBIDS:if(O=window.__pubxFloorsConfig__?window.__pubxFloorsConfig__.floors.data.currency:a.currency,eZ(e)){c=.01;break}let U=H(e.code);if(U){let o=eG(U,window.__nextfloorsConfig__)||eG(U,window.__pubxFloorsConfig__);if(o){c=o;break}l({code:Z.NO_BID_FLOOR_RULE_NOT_FOUND,adUnitCode:e.code})}else{let o=r.map(e=>{var o;if("function"!=typeof e.getFloor)return;let t=null===(o=e.getFloor({size:"*",mediaType:"banner"}))||void 0===o?void 0:o.floor;return"number"==typeof t&&t>=0?t:void 0}).filter(e=>void 0!==e);if(o.length>0){c=o.reduce((e,o)=>e+o,0)/o.length;break}l({code:Z.GET_FLOOR_NOT_FOUND,adUnitCode:e.code})}void 0!==a.defaultValues["*|banner"]?c=a.defaultValues["*|banner"]:(l({code:Z.TAG_DEFAULT_VALUES_NOT_FOUND,adUnitCode:e.code}),c=.01)}return F(a.pubxExperiments)&&(null===(d=window.__pubx__.abTestConfig)||void 0===d?void 0:d.isABTestEnabled)&&Object.assign(N,e8(a)),s({type:"pbBid",data:{adUnitCode:e.code,status:i,bidCurrency:O,bidValue:parseFloat(c.toFixed(4)),pubCurrency:a.currency,floorData:b(m),adserverTargeting:N}}),p=c,i===z.FLOORED&&(c=f(c,O,a.currency,a,e.code,l)),{bidCpmValue:parseFloat(c.toFixed(4)),originalBidCpmValue:parseFloat(p.toFixed(4)),bidCurrency:O,floorData:b(m),adserverTargeting:N}},m=(e,o,t,r)=>{var i,a,n,d;let{adUnitBidsReceived:l,adUnitBidsRejected:_,adUnitBidsFromBidderRequests:s}=x(e,o),u=o.auctionId,c=p(l,_,t.hbPbKey),f=null===(a=null===(i=s[0])||void 0===i?void 0:i.floorData)||void 0===a?void 0:a.floorProvider,g=null===(d=null===(n=s[0])||void 0===n?void 0:n.floorData)||void 0===d?void 0:d.modelVersion,b=eZ(e),{bidCpmValue:m,originalBidCpmValue:N,bidCurrency:R,floorData:w,adserverTargeting:v}=O(e,l,_,s,c,t,r);return{auctionId:u,adUnit:e,adUnitStatus:c,bidCpmValue:m,originalBidCpmValue:N,bidCurrency:R,adserverTargeting:v,floorData:w,floorProvider:f,floorSkipStatus:b,floorModelVersion:g}},N=e=>e.adUnits.flatMap(e=>e.bids).map(e$).filter(e=>void 0!==e)[0],R=(e,o)=>{let t=e.bids.map(e$).filter(e=>void 0!==e)[0];if(void 0===t)throw o.remoteAucError({code:Z.MODEL_VERSION_NOT_FOUND_READ,adUnitCode:e.code}),Error(ed[Z.MODEL_VERSION_NOT_FOUND_READ].message+" for adUnit "+e.code);return t},w=e=>{let o=e.includes("_AB_")?e.split("_AB_")[1].split("_")[0]:void 0;return o},v=(e,o,t)=>{switch(t){case z.WIN:return e.includes("_dwt_")?parseFloat(e.split("_dwt_")[1].split("_")[0]):o.winBidMultiplier;case z.FLOORED:return e.includes("_dt_")?parseFloat(e.split("_dt_")[1].split("_")[0]):o.flooredBidMultiplier;case z.NOBIDS:return e.includes("_dnt_")?parseFloat(e.split("_dnt_")[1].split("_")[0]):o.noBidMultiplier}},U=(e,o,t)=>{if(e.includes("_fm_"))return parseFloat(e.split("_fm_")[1].split("_")[0]);if(!o.pmacFloorMultiplier)throw t({code:Z.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG}),Error(ed[Z.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG].message);return o.pmacFloorMultiplier},E=(e,o,t)=>{let r=void 0!==e.mediaTypes.banner,i=e.bids.some(e=>!!e.bidder),a=e0(e);if(!o&&a)throw t({code:Z.PUBX_OFF_FLOORS_FOUND,adUnitCode:e.code}),Error(ed[Z.PUBX_OFF_FLOORS_FOUND].message+" for adUnitCode "+e.code);return r&&i&&(!o&&!a||o&&a)},y=e=>e?e.filter(e=>!!e.originalCpm):[],A=(e,o,t,r)=>{let{remoteAucError:i}=r,{bidCpmValue:a,adUnitStatus:n,adUnit:d,auctionId:l}=e;el({remoteError:i,code:Z.UNCAUGHT_ERROR,location:"triggerPmac"},()=>{eJ(l,d.code,a,n,t,U(o,t,i),eF(o,t),r)}),d.code;let _=parseFloat((a*v(o,t,n)).toFixed(4));return eZ(d)?void 0:{adUnitCode:d.code,floorValue:_,status:n}},x=(e,o)=>{let t=o.auctionId,r=s(o.bidsReceived,e.code),i=u(y(o.bidsRejected),e.code),a=c(o.bidderRequests,e.code);return{auctionId:t,adUnitBidsReceived:r,adUnitBidsRejected:i,adUnitBidsFromBidderRequests:a}},C=e=>{e.pbNamespace.que.push(()=>{e.pbNamespace.onEvent("auctionInit",o=>{!function(e,o){var t,r,i,a;t=this,r=void 0,i=void 0,a=function*(){let{debug:t,error:r}=window.__pubx__.logger,i=100/e.samplingRate/100;if(100*Math.random()<i&&function(){let e=localStorage.getItem("lastCallDate"),o=new Date().toLocaleDateString();return e!==o}()){t("Telemetry Triggered");let i=function(e,o){let t=[],[r,i]=function(e){try{let o=e.adUnits||[],t=new Set,r=[];return o.forEach(function(e){let o;let i=Object.keys(e.mediaTypes||{});if(e.mediaTypes.banner){let t=e.mediaTypes.banner;o=t.sizes.map(e=>e.join("x"))}else o=[];let a=H(e.code),n=a?a.getAdUnitPath()===e.code?a.getSlotElementId():a.getSlotElementId()===e.code?a.getAdUnitPath():"":"";r.push({code:e.code,sizes:o,gamSlot:n,media_type:i}),e.bids.forEach(function(e){t.add(e.bidder)})}),[{adUnits:r,bidders:Array.from(t)},null]}catch(o){let e="Error in getAdUnitAndBidders, reason:"+o.message;return[{adUnits:[],bidders:[]},e]}}(o);null!==i&&t.push(i);let[a,n]=function(e){try{let o={PubxaiAA:!!e.pbNamespace.installedModules.includes("pubxaiAnalyticsAdapter"),PriceFloors:!!e.pbNamespace.installedModules.includes("priceFloors"),PubxaiRTD:!!e.pbNamespace.installedModules.includes("pubxaiRtdProvider")};return[o,null]}catch(o){let e="Error in getPubxModuleStatus, reason:"+o.message;return[{},e]}}(e);null!==n&&t.push(n);let d=eN();return{pubx_id:e.pubxId,pbjs_version:e.pbNamespace.version||"",installed_modules:e.pbNamespace.installedModules.filter(e=>!e.includes("BidAdapter"))||[],ad_units:r.adUnits,bidders:r.bidders,pubx_modules_status:a,errors:t.length>0?t:null,timestamp:new Date().toISOString(),page_info:es(d)}}(e,o);try{let e=navigator.sendBeacon("https://analytics.pbxai.com/telemetry",new Blob([JSON.stringify(i)],{type:"application/json"}));e?(localStorage.setItem("lastCallDate",new Date().toLocaleDateString()),t("Telemetry data sent successfully using sendBeacon",i)):t("Telemetry API call failed using sendBeacon")}catch(e){r("Telemetry API call failed due to an error:",e)}}},new(i||(i=Promise))(function(e,o){function n(e){try{l(a.next(e))}catch(e){o(e)}}function d(e){try{l(a.throw(e))}catch(e){o(e)}}function l(o){var t;o.done?e(o.value):((t=o.value)instanceof i?t:new i(function(e){e(t)})).then(n,d)}l((a=a.apply(t,r||[])).next())})}(e,o=Object.assign({},o))})})},T=e=>{var o,t,r,i;if(!(null===(o=window.__pubx__.abTestConfig)||void 0===o?void 0:o.isABTestEnabled)||(null===(t=window.__pubx__.abTestConfig)||void 0===t?void 0:t.testBucket)!=="A"&&(null===(r=window.__pubx__.abTestConfig)||void 0===r?void 0:r.testBucket)!=="B")return e;let a=(null===(i=window.__pubx__.abTestConfig)||void 0===i?void 0:i.testBucket)==="A";return e.floors.enforcement?e.floors.enforcement.enforceJS=a:e.floors.enforcement={enforceJS:a},e},F=e=>!!e&&"number"==typeof(null==e?void 0:e.enforceJsSplit)&&e.enforceJsSplit>0;(eo=Y||(Y={})).DBM_HEURISTICS="dbm_heuristics",eo.PMAC_DATA="pmac_data";let S="pbx:dpbid",I="pubx:pmac",D="pubx:extraData",h="9.5.0",L=(e,o)=>-1===e.localeCompare(o,void 0,{numeric:!0,sensitivity:"base"}),P=e=>L(e,h)?sessionStorage:localStorage,M=(e,o)=>{let t=D;switch(o){case Y.DBM_HEURISTICS:t=L(e,h)?S:L(e,"9.11.0")?I:D;break;case Y.PMAC_DATA:t=L(e,h)?S:I}return t},B=()=>{try{let e=[localStorage,sessionStorage];e.forEach(e=>{e.removeItem(S),e.removeItem(I),e.removeItem(D)})}catch(e){console.error(e)}},G=(e,o)=>{try{let t=e.pbNamespace.version.replace("v",""),r=P(t);if(!r){console.error("Failed to get storage instance.");return}let i=Y.PMAC_DATA,a=M(t,i),n=JSON.parse(r.getItem(a)||"{}");n[i]||(n[i]=[]),n[i].push(o),r.setItem(a,JSON.stringify(n))}catch(e){console.error("Error appending PMAC data to local storage:",e)}},V=()=>(()=>({flooredBidMultiplier:0.75,noBidMultiplier:0.1,winBidMultiplier:1.0,pmacFloorMultiplier:0.5,decayRate:null,gamBuckets:[{'pbx_a0d_n':[0,0.03]},{'pbx_a1d_n':[0.03,0.06]},{'pbx_a2d_n':[0.06,0.09]},{'pbx_a3d_n':[0.09,0.12]},{'pbx_a4d_n':[0.12,0.15]},{'pbx_b0d_n':[0.15,0.2]},{'pbx_b1d_n':[0.2,0.25]},{'pbx_b2d_n':[0.25,0.3]},{'pbx_b3d_n':[0.3,0.35]},{'pbx_b4d_n':[0.35,0.4]},{'pbx_b5d_n':[0.4,0.45]},{'pbx_b6d_n':[0.45,0.5]},{'pbx_b7d_n':[0.5,0.55]},{'pbx_b8d_n':[0.55,0.6]},{'pbx_b9d_n':[0.6,0.65]},{'pbx_b10d_n':[0.65,0.7]},{'pbx_b11d_n':[0.7,0.75]},{'pbx_b12d_n':[0.75,0.8]},{'pbx_b13d_n':[0.8,0.85]},{'pbx_b14d_n':[0.85,0.9]},{'pbx_b15d_n':[0.9,0.95]},{'pbx_b16d_n':[0.95,1]},{'pbx_c0d_n':[1,1.1]},{'pbx_c1d_n':[1.1,1.2]},{'pbx_c2d_n':[1.2,1.3]},{'pbx_c3d_n':[1.3,1.4]},{'pbx_c4d_n':[1.4,1.5]},{'pbx_c5d_n':[1.5,1.6]},{'pbx_c6d_n':[1.6,1.7]},{'pbx_c7d_n':[1.7,1.8]},{'pbx_c8d_n':[1.8,1.9]},{'pbx_c9d_n':[1.9,2]},{'pbx_d0d_n':[2,2.25]},{'pbx_d1d_n':[2.25,2.5]},{'pbx_d2d_n':[2.5,2.75]},{'pbx_d3d_n':[2.75,3]},{'pbx_d4d_n':[3,3.25]},{'pbx_d5d_n':[3.25,3.5]},{'pbx_d6d_n':[3.5,3.75]},{'pbx_d7d_n':[3.75,4]},{'pbx_d8d_n':[4,4.25]},{'pbx_d9d_n':[4.25,4.5]},{'pbx_d10d_n':[4.5,4.75]},{'pbx_d11d_n':[4.75,5]},{'pbx_d12d_n':[5,111111]}]}))(),j=()=>{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},k=e=>{let o=t();r(o,e);let i=V();return j(),Object.assign(Object.assign({},o),i)},K=(e,o)=>{let{error:t}=window.__pubx__.logger,r=googletag.pubads().getSlots(),i=[];return e.forEach(e=>{let o=r.find(o=>o.getAdUnitPath()===e||o.getSlotElementId()===e);void 0!==o&&i.push({adUnitCode:e,slot:o})}),i},H=e=>{let o=googletag.pubads().getSlots().find(o=>o.getAdUnitPath()===e||o.getSlotElementId()===e);return o},W=(e,o,t)=>{e.pbNamespace.que.push(()=>{e.pbNamespace.onEvent("auctionEnd",r=>{try{r=Object.assign({},r);let{makeRemoteAucError:i,makeRemoteAucEvent:a,error:n}=window.__pubx__.logger,d=i(r),l=a(r),_={remoteAucError:d,remoteAucEvent:l};el({remoteError:d,code:Z.UNCAUGHT_ERROR,location:"readAndSetKvsAuction"},()=>{let{variant:i}=window.__pubx__,a="PB_GAM_CUSTOM_MG"===i;a&&(window.__pubx__.logger.debug("pubx: setPubxLoadedFromAuctionData",a),window.__pubxLoaded__=r.adUnits.some(e0),window.__pubx__.logger.debug("pubx: window.__pubxLoaded__",window.__pubxLoaded__));let n=window.__pubxLoaded__;t&&(r=t(r,e,_)),r.adUnits.filter(e=>E(e,n,_.remoteAucError)).map(t=>{el({remoteError:d,code:Z.UNCAUGHT_ERROR,location:"readAndSetKvsAdUnit"},()=>{var i;let n=e9(t,e,_);F(e.pubxExperiments)&&(null===(i=window.__pubx__.abTestConfig)||void 0===i?void 0:i.isABTestEnabled)&&Object.assign(n,e8(e));let d=m(t,r,e,_),{adUnitStatus:l,originalBidCpmValue:s,auctionId:u,bidCurrency:c,adserverTargeting:p,floorData:f,floorProvider:g,floorSkipStatus:O,floorModelVersion:N}=d;if(G(e,{auctionId:u,adUnitCode:t.code,status:l,bidCurrency:c,bidValue:s,pubCurrency:e.currency,adserverTargeting:p,floorData:b(f),floorProvider:g,floorSkipStatus:O,floorModelVersion:N}),e0(t)){if(a){let o={vendor:"pubxai",auctionId:r.auctionId,transactionId:t.transactionId||eN(),billingId:eN(),type:"impression"};e.pbNamespace.rp.billableEvent(o),window.__pubx__.logger.debug("pubx: billable event raised for adUnit:",t.code,o)}let o=R(t,_);Object.assign(n,e5(o,e));let i=A(d,o,e,_);i&&Object.assign(n,e4(i,o,e,_.remoteAucError))}o&&o(t,r.auctionId,n,e,_)})})})}catch(e){window.__pubx__.logger.error(e)}})})},q=(e,o)=>{if(0===e)return o[0];let t=o.find(o=>{let t=Object.keys(o)[0],[r,i]=o[t];return e>r&&e<=i});return t},J=(e,o,t)=>{let r=q(e.floorValue,o.gamBuckets);if(void 0===r)throw t({code:Z.GAM_BUCKET_NOT_FOUND,adUnitCode:e.adUnitCode,payload:{floorWithStatus:e}}),Error(ed[Z.GAM_BUCKET_NOT_FOUND].message+" for "+JSON.stringify(e));let i=Object.keys(r)[0],a=e.status===z.WIN?"_w":e.status===z.FLOORED?"_f":"_n";return i.split("_n")[0]+a},X=e=>{e.pbNamespace.que.push(function(){let{error:e,remotePageError:o}=window.__pubx__.logger;googletag.cmd.push(()=>{googletag.pubads().addEventListener("slotAdded",e=>{el({remoteError:o,code:Z.UNCAUGHT_GAM_ERROR,location:"setupEventHandlersForGamQue"},()=>{let o=e.slot,{__pubxGamQue__:t}=window,r=t.filter(e=>o&&(o.getAdUnitPath()===e.adUnitCode||o.getSlotElementId()===e.adUnitCode));r.forEach(e=>{if(e.cmd()){let o=t.findIndex(o=>o.id===e.id);o>-1&&t.splice(o,1)}})})})})})};var z,Y,Q,Z,$,ee,eo,et,er,ei,ea=function(e,o,t,r){return new(t||(t=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(e){a(e)}}function d(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var o;e.done?i(e.value):((o=e.value)instanceof t?o:new t(function(e){e(o)})).then(n,d)}l((r=r.apply(e,o||[])).next())})},en=function(e,o){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>o.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>o.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};(et=Q||(Q={})).IN_PROGRESS="IN_PROGRESS",et.SUCCESS="SUCCESS",et.ERROR="ERROR",(er=Z||(Z={})).GPT_SLOT_NOT_FOUND="GPT_SLOT_NOT_FOUND",er.GAM_QUE_GPT_SLOT_NOT_FOUND="GAM_QUE_GPT_SLOT_NOT_FOUND",er.GAM_BUCKET_NOT_FOUND="GAM_BUCKET_NOT_FOUND",er.CALC_FLOOR_NOT_FOUND="CALC_FLOOR_NOT_FOUND",er.IMPROVEMEDIA_API_NOT_FOUND="IMPROVEMEDIA_API_NOT_FOUND",er.INVESTING_FILTER_NOT_FOUND="INVESTING_FILTER_NOT_FOUND",er.PUBX_AA_NOT_FOUND="PUBX_AA_NOT_FOUND",er.PRICE_FLOORS_NOT_FOUND="PRICE_FLOORS_NOT_FOUND",er.NON_PUBX_FLOORS_FOUND="NON_PUBX_FLOORS_FOUND",er.CURRENCY_INVALID_INPUT="CURRENCY_INVALID_INPUT",er.CURRENCY_MODULE_NOT_INSTALLED="CURRENCY_MODULE_NOT_INSTALLED",er.GET_FLOOR_NOT_FOUND="GET_FLOOR_NOT_FOUND",er.NO_BID_FLOOR_RULE_NOT_FOUND="NO_BID_FLOOR_RULE_NOT_FOUND",er.TAG_DEFAULT_VALUES_NOT_FOUND="TAG_DEFAULT_VALUES_NOT_FOUND",er.PUBX_OFF_FLOORS_FOUND="PUBX_OFF_FLOORS_FOUND",er.MODEL_VERSION_NOT_FOUND_READ="MODEL_VERSION_NOT_FOUND_READ",er.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG="PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG",er.INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE="INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE",er.MISSING_ADUNIT_FLOOR_RESPONSE="MISSING_ADUNIT_FLOOR_RESPONSE",er.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE="PMAC_FLOOR_RESPONSE_NOT_AVAILABLE",er.UNCAUGHT_ERROR="UNCAUGHT_ERROR",er.UNCAUGHT_GAM_ERROR="UNCAUGHT_GAM_ERROR",(ei=$||($={})).INFO="INFO",ei.WARNING="WARNING",ei.ERROR="ERROR",ei.FATAL="FATAL";let ed={[Z.GPT_SLOT_NOT_FOUND]:{message:"GPT Slot not found",severity:$.WARNING},[Z.GAM_QUE_GPT_SLOT_NOT_FOUND]:{message:"Gam Que: GPT Slot not found",severity:$.ERROR},[Z.GAM_BUCKET_NOT_FOUND]:{message:"GAM Bucket not found",severity:$.WARNING},[Z.CALC_FLOOR_NOT_FOUND]:{message:"floorWithStatus not found",severity:$.FATAL},[Z.IMPROVEMEDIA_API_NOT_FOUND]:{message:"lwhbim.adServerKeywordsAdUnit is not defined",severity:$.ERROR},[Z.INVESTING_FILTER_NOT_FOUND]:{message:"window._imhb_auctions is not defined",severity:$.ERROR},[Z.PUBX_AA_NOT_FOUND]:{message:"pubxaiAnalyticsAdapter module is not installed",severity:$.WARNING},[Z.PRICE_FLOORS_NOT_FOUND]:{message:"priceFloors module is not installed",severity:$.WARNING},[Z.NON_PUBX_FLOORS_FOUND]:{message:"Non-pubx floor provider present",severity:$.WARNING},[Z.CURRENCY_INVALID_INPUT]:{message:"Invalid input types for currency conversion",severity:$.WARNING},[Z.CURRENCY_MODULE_NOT_INSTALLED]:{message:"currency module of prebid.js is not installed",severity:$.WARNING},[Z.GET_FLOOR_NOT_FOUND]:{message:"calc nbids - None of bidderRequests.bids.getFloor() is defined",severity:$.WARNING},[Z.NO_BID_FLOOR_RULE_NOT_FOUND]:{message:"calc nbids - Floor rule not found in __pubxFloorsConfig__ and __nextfloorsConfig__",severity:$.WARNING},[Z.TAG_DEFAULT_VALUES_NOT_FOUND]:{message:"defaultValues of *|banner in config is undefined",severity:$.ERROR},[Z.PUBX_OFF_FLOORS_FOUND]:{message:"pubxLoaded is false but has floorData",severity:$.FATAL},[Z.MODEL_VERSION_NOT_FOUND_READ]:{message:"floorModelVersion is undefined but adUnit.bids is not",severity:$.FATAL},[Z.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG]:{message:"PMAC floor multiplier not found in config",severity:$.ERROR},[Z.INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE]:{message:"Invalid schema fields in floor rules response, expected only ['gptSlot']",severity:$.ERROR},[Z.MISSING_ADUNIT_FLOOR_RESPONSE]:{message:"adUnitCode not found in floor rules response",severity:$.ERROR},[Z.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE]:{message:"Floors Reponse not available for pmac",severity:$.WARNING},[Z.UNCAUGHT_ERROR]:{message:"Uncaught Error",severity:$.ERROR},[Z.UNCAUGHT_GAM_ERROR]:{message:"Uncaught GAM Error",severity:$.ERROR}},el=({remoteError:e,code:o,location:t},r)=>{try{r()}catch(r){window.__pubx__.logger.error(r),e({code:o,payload:{name:r.name,message:r.message,location:t}})}},e_=e=>{let{__pubx__:{variant:o,version:t}}=window;return{variant:o,version:t,loadTime:window.__loadTime__,pbVersion:e.pbNamespace.version,pbNamespace:e.pbNamespace.name}},es=e=>({userAgent:navigator.userAgent,host:window.location.host,path:window.location.pathname,pageId:e,doNotTrack:navigator.doNotTrack}),eu=(e,o)=>e.pbNamespace.getEvents().filter(e=>"auctionEnd"===e.eventType).findIndex(e=>e.args.auctionId===o),ec=e=>e.pbNamespace.getEvents().filter(e=>"auctionInit"===e.eventType).length,ep=e=>{let{code:o,adUnitCode:t,payload:r}=e,{message:i,severity:a}=ed[o];return{code:o,severity:a,message:i,adUnitCode:t,payload:r}},ef=(e,o,t,r)=>{let i=o;if(e.adUnitCode){let{adUnits:o,bidderRequests:t,bidsReceived:r,bidsRejected:a}=i;i=Object.assign(Object.assign({},i),{adUnits:o.filter(o=>o.code===e.adUnitCode),bidderRequests:t.map(o=>Object.assign(Object.assign({},o),{bids:o.bids.filter(o=>o.adUnitCode===e.adUnitCode)})),bidsReceived:r.filter(o=>o.adUnitCode===e.adUnitCode),bidsRejected:a?a.filter(o=>o.adUnitCode===e.adUnitCode):void 0})}let{auctionId:a,adUnits:n,bidderRequests:d,bidsReceived:l,bidsRejected:_}=i,s={adUnits:n.map(({code:e,sizes:o,bids:t,mediaTypes:r})=>({code:e,mediaTypes:Object.keys(r)})),bidderRequestsCount:d.length,bidsReceived:l.map(({adUnitCode:e,adserverTargeting:o,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n})=>({adUnitCode:e,adserverTargeting:o?{hb_pb:o.hb_pb}:void 0,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n?{floorValue:n.floorValue}:void 0})),bidsRejected:_?_.map(({adUnitCode:e,adserverTargeting:o,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n})=>({adUnitCode:e,adserverTargeting:o?{hb_pb:o.hb_pb}:void 0,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n?{floorValue:n.floorValue}:void 0})):void 0};return Object.assign({previousAuctionCount:eu(t,a),auctionId:a,auctionInfo:s,modelVersion:N(o)},eg(e,t,r))},eg=(e,o,t)=>({type:"error",isPubxEnabled:window.__pubxLoaded__,pubxId:o.pubxId,tagInfo:e_(o),pageInfo:es(t),errorData:ep(e),timesince:Date.now()-window.__loadTimestamp__,timestamp:Date.now()}),eb=e=>{let o=e.pbNamespace.getConfig("floors");return o&&o.data&&o.data.floorProvider?o.data.floorProvider:void 0},eO=(e,o,t,r)=>{let{auctionId:i,adUnits:a,bidsReceived:n,bidsRejected:d,bidderRequests:l}=e,_={adUnitCount:a.length,bidCount:n.length+(d?d.length:0),bidders:[...new Set(l.map(({bidderCode:e})=>e))]};return{type:"event",isPubxEnabled:window.__pubxLoaded__,pubxId:o.pubxId,loadedBeforePb:window.__loadedBeforePb__,tagInfo:e_(o),floorProvider:eb(o),pageInfo:es(r),missedAuctionCount:t,timesince:Date.now()-window.__loadTimestamp__,timestamp:Date.now(),previousAuctionCount:eu(o,i),auctionId:i,auctionInfo:_,modelVersion:N(e),pbBidData:[],gamTargetingData:[]}},em=e=>{let{severity:o}=ed[e.code];return!1},eN=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=16*Math.random()|0;return("x"===e?o:3&o|8).toString(16)}),eR=()=>{window.__pubxGamQue__.filter(e=>!e.logged).forEach(e=>{e.error(),e.logged=!0})},ew=e=>{let o=[],t=[],r=[],i=ec(e),a=eN(),n=e.enableInstrumentationLogs&&1/e.samplingRate>Math.random();window.__pubxLogsEnabled__=n;let d=e=>JSON.stringify(e).length,l=(e,o)=>{let t=[],r=0,i=[];for(let a of e){let e=d([a]);r+e>o?(i.push(t),t=[a],r=e):(t.push(a),r+=e)}return t.length>0&&i.push(t),i},_=(e,o)=>{0!==e.length&&l(e,65536).map(e=>{JSON.parse(JSON.stringify(e));let t=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon(o,t)})},s=()=>!!navigator.sendBeacon&&!!document.visibilityState;s()&&document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(eR(),_([...o,...t,...r],"https://analytics.pbxai.com/logs"),[o,t,r].map(e=>e.splice(0)))});let u=window.location.search,c=new URLSearchParams(u),p=(...e)=>{e=e.filter(e=>void 0!==e),c.has("pubx_debug")&&console.error("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","ERROR:",...e)};return{debug:(e,...o)=>{c.has("pubx_debug")&&console.info("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","INFO:",e,...o)},error:p,makeRemoteAucError:t=>r=>{let{code:i,adUnitCode:d,payload:l}=r;p(ed[i].message,d,l),s()&&(n||em(r))&&o.push(ef(r,t,e,a))},remotePageError:o=>{let{code:r,adUnitCode:i,payload:d}=o;p(ed[r].message,i,d),s()&&(n||em(o))&&t.push(eg(o,e,a))},makeRemoteAucEvent:o=>{let t=(t,r)=>{let n=r.find(e=>e.auctionId===o.auctionId);if(void 0===n&&(n=eO(o,e,i,a),r.push(n)),"pbBid"===t.type)n.pbBidData.push(t.data);else if("gamTargeting"===t.type){let e=t.data,o=n.gamTargetingData.find(o=>o.adUnitCode===e.adUnitCode);void 0===o?n.gamTargetingData.push(e):Object.assign(o,e)}};return e=>{s()&&n&&t(e,r)}}}},ev=e=>{window.__pubx__.logger.debug("version:",window.__pubx__.variant+"_"+window.__pubx__.version+"_"+e.name)},eU=()=>{window.__loadTime__=window.__loadTimestamp__?Date.now()-window.__loadTimestamp__:-1,window.__loadTimestamp__=Date.now()},eE=(e,o)=>{let t=window.__pubxFloorsConfig__.floors,{auctionDelay:r,endpoint:i,data:a}=t,n=en(t,["auctionDelay","endpoint","data"]);window.__nextfloorsConfig__={floors:Object.assign(Object.assign({},n),{data:e})}},ey=(e,o)=>{let t=o.pbNamespace.getConfig("floors"),{auctionDelay:r,endpoint:i,data:a}=t,n=en(t,["auctionDelay","endpoint","data"]);window.__nextfloorsConfig__={floors:Object.assign(Object.assign({},n),{data:e})}},eA=e=>window.__pmacCpmHistory__[e],ex=e=>{let o=eA(e);return o?o.history:[]},eC=(e,o,t,r)=>{let{debug:i}=window.__pubx__.logger,{__pmacCpmHistory__:a}=window;void 0===a[o]&&(a[o]={history:[],decayRate:void 0});let n={auctionId:e,cpm:t,adUnitStatus:r};ex(o).push(n),i("Update Pmac history",o,n)},eT=(e,o,t)=>Math.log(o/(e=0===e?.01:e))/t,eF=(e,o)=>{let{debug:t}=window.__pubx__.logger;return e.includes("_dr_")?-1*parseFloat(e.split("_dr_")[1].split("_")[0]):null!==o.decayRate?-1*o.decayRate:(t("No decay rate in floor model version or config",e),null)},eS=(e,o,t)=>(e=0===e?.01:e)*Math.exp(o*t),eI=(e,o)=>{let{debug:t}=window.__pubx__.logger,r=eA(e);r.decayRate=o,t("Assigning decay rate",e,r.decayRate)},eD=e=>{let{debug:o}=window.__pubx__.logger,t=eA(e),{history:r}=t,[i,a,n]=[r[0].cpm,r[r.length-1].cpm,r.length-1];t.decayRate=eT(i,a,n),o("Updating decay rate",e,t.decayRate)},eh=(e,o)=>{let t=ex(e);if(0===t.length)return!1;if(o||1===t.length)return!0;let r=t.slice(0,-1).map(e=>e.cpm).reduce((e,o)=>Math.min(e,o)),i=t[t.length-1].cpm;return i<r},eL=(e,o,t)=>{let{remoteAucError:r}=t,{__pmacCpmHistory__:i}=window,a=Object.keys(i);if("PB_GAM_CUSTOM_AY"===window.__pubx__.variant)a.forEach(r=>{eh(r,o)&&eV(r,void 0,ek(r,e,o),t)});else{let i=K(a,r);i.forEach(({adUnitCode:r,slot:i})=>{eh(r,o)&&eV(r,i,ek(r,e,o),t)})}},eP=e=>"|banner"+(e.fields.includes("size")?"|*":""),eM=(e,o,t)=>{let r=Object.keys(o),i=eP(t),a=r.find(o=>[e.getAdUnitPath()+i,e.getSlotElementId()+i].includes(o));return a},eB=(e,o,t)=>{let r=Object.keys(o),i=r.find(o=>o.split(eP(t))[0]===oo(e));return i},eG=(e,o)=>{if(o){let t=eM(e,o.floors.data.values,o.floors.data.schema);if(t)return o.floors.data.values[t]}},eV=(e,o,t,r)=>{let i;let{remoteAucError:a}=r,{__nextfloorsConfig__:n}=window;if(void 0===n)throw Error("__nextfloorsConfig__ undefined. Skip updating adUnit floors config");let{floors:{data:{values:d,schema:l}}}=n;if(void 0===(i="PB_GAM_CUSTOM_AY"===window.__pubx__.variant?eB(e,d,l):eM(o,d,l))){a({code:Z.MISSING_ADUNIT_FLOOR_RESPONSE,adUnitCode:e});return}d[i]=t},ej=e=>ex(e).length<=1,ek=(e,o,t)=>{let{decayRate:r,history:i}=eA(e),[a,n,d]=[i[0].cpm,i.length,i[i.length-1]],l=()=>{let e=eS(a,r,n),t=e*o;return t<.01?.01:parseFloat(t.toFixed(4))};return t?l():ej(e)||d.adUnitStatus===z.NOBIDS?.01:l()},eK=(e,o)=>ea(void 0,void 0,void 0,function*(){let{debug:o}=window.__pubx__.logger;try{let t=yield fetch(e.floorFetchUrl),r=yield t.json();o("PMAC Received floor rules",r),eE(r,e)}catch(r){let t=n(e);o("PMAC Default floor rules",t),eE(t,e)}}),eH=(e,o)=>ea(void 0,void 0,void 0,function*(){let{debug:o}=window.__pubx__.logger;try{let t=yield fetch(e.floorFetchUrl),r=yield t.json();o("PMAC Received floor rules",r),ey(r,e)}catch(r){let t=n(e);o("PMAC Default floor rules",t),ey(t,e)}}),eW=(e,o)=>ea(void 0,void 0,void 0,function*(){let{debug:o}=window.__pubx__.logger,t=e.pbNamespace.getConfig("floors");window.__nextfloorsConfig__={floors:t},o("Reading floors from config",t)}),eq=()=>ea(void 0,void 0,void 0,function*(){let e=()=>{let{debug:e}=window.__pubx__.logger,o=window.__pubxFloorsConfig__;if(!o)throw Error("__pubxFloorsConfig__ not defined. Skip pmac");window.__nextfloorsConfig__=o,e("Reading floors from rtd module",o)};e(),window.addEventListener("floorsApi",o=>{o.detail.status===Q.SUCCESS&&e()})}),eJ=(e=null,(o,t,r,i,a,n,d,_)=>ea(void 0,void 0,void 0,function*(){let{remoteAucError:s}=_,{variant:u,isRtd:c}=window.__pubx__;null===e&&(e=c?eq():"PB_GAM_CUSTOM_AZ"===u?eW(a,_):"PB_GAM_CUSTOM_MG"==u?eH(a,_):eK(a,_)),yield e,eC(o,t,r,i);let p=null!==d;p?eI(t,d):ej(t)||eD(t);let{__nextfloorsConfig__:f}=window;if(void 0===f)throw s({code:Z.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE,adUnitCode:t}),Error("__nextfloorsConfig__ undefined. Skip updating floors config");"PB_GAM_CUSTOM_AY"===u?(eL(n,p,_),l(a,e=>f)):googletag.cmd.push(()=>{el({remoteError:s,code:Z.UNCAUGHT_GAM_ERROR,location:"updateSetFloor"},()=>{eL(n,p,_),l(a,e=>f)})})})),eX=()=>({debug:(e,...o)=>{},error:(...e)=>{},makeRemoteAucError:e=>e=>{},remotePageError:e=>{},makeRemoteAucEvent:e=>e=>{}}),ez=(e,o)=>{B(),window.__pubxFloors__={},!1!==window.__loadedBeforePb__&&(window.__loadedBeforePb__=void 0===e.pbNamespace.version),window.__pmacCpmHistory__={},eU(),window.__pubx__={variant:o,version:"1736426711696",isRtd:!1},window.__pubx__.logger||(window.__pubx__.logger=eX()),window.__pubxLoaded__&&F(e.pubxExperiments)&&oi(e.pubxExperiments.enforceJsSplit)&&(window.__pubx__.abTestConfig={isABTestEnabled:!0,testBucket:50>100*Math.random()?"A":"B"}),e.pbNamespace.que.push(function(){window.__pubx__.logger=ew(e),ev(e.pbNamespace)}),window.__pubxGamQue__=[]},eY=(e,o)=>{window.__pubxLoaded__=eQ(e.splitRate),ez(e,o)},eQ=e=>(void 0===window.__pubxLoaded__&&(window.__pubxLoaded__=e>100*Math.random()),window.__pubxLoaded__),eZ=e=>e.bids.some(({floorData:e})=>e&&e.floorProvider===o&&e.skipped),e$=e=>{let{floorData:t}=e;if(t&&t.floorProvider===o&&t.modelVersion)return t.modelVersion},e0=e=>e.bids.some(e$),e1=(e,o,t)=>{if("object"!=typeof e||0===o.length){window.__pubx__.logger.error("setObjectValueFromKeyPath: invalid arguments",{object:e,keyPath:o,value:t});return}let r=o.length-1;for(let t=0;t<r;++t){let r=o[t];r in e||(e[r]={}),e=e[r]}e[o[r]]=t},e5=(e,o)=>{let t={},r=w(e);return r&&(t[o.pubxMvKey]=r),t},e4=(e,o,t,r)=>{let i={},a=J(e,t,r);i[t.pubxFloorKey]=a;let n=w(o);if(n){let e=e3(a,n);i[t.pubxFloorMvKey]=e}return i},e3=(e,o)=>e+"-"+o,e6=(e,o)=>{let t=eZ(e);return t?o.pubxOptimizedOffValue:o.pubxOptimizedOnValue},e2=(e,o)=>{let t=e0(e);return t?o.pubxSplitOnValue:o.pubxSplitOffValue},e9=(e,o,t)=>{let r={},i=e2(e,o);if(r[o.pubxSplitKey]=i,i===o.pubxSplitOnValue){let i=R(e,t),a=o.modelVersion===i;a||(r[o.pubxOptimizedKey]=e6(e,o))}return r},e8=e=>{var o;let t={},r={enforceJSOn:"f_enf_on",enforceJSOff:"f_enf_off"},i=null===(o=window.__pubx__.abTestConfig)||void 0===o?void 0:o.testBucket,a="A"===i?e.pubxABSplitAKey:e.pubxABSplitBKey,n="A"===i?r.enforceJSOn:r.enforceJSOff;return t[a]=n,t},e7=(e,o,t,r,i)=>{let{remoteAucEvent:a}=i;e1(window.__pubxFloors__,[e,o,t],r),window.__pubx__.logger.debug("Setting KVs in Global",{auctionId:e,adUnitCode:o,key:t,value:r}),a({type:"gamTargeting",data:{adUnitCode:o,[t]:r}})},oe=(e,o,t,r,i)=>{Object.entries(t).forEach(([t,r])=>{e7(o,e.code,t,r,i)})},oo=e=>e.split("__ayManagerEnv__")[0],ot=(e,o)=>e.bidder,or=e=>{let o=d(e);return o.floors.additionalSchemaFields={bidder:ot},o},oi=e=>e>100*Math.random();t().pbNsKeys.split(",").map(e=>k(e)).forEach(e=>{eY(e,"PB_GAM_GLOBAL_KVS"),a(e),l(e,or),C(e),W(e,oe),X(e)})})();